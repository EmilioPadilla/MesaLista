import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useState } from 'react';
import { EditOutlined, CalendarOutlined, UserOutlined, GiftOutlined, ShoppingOutlined, DownOutlined, UploadOutlined, CameraOutlined, } from '@ant-design/icons';
import { Col, Button, Card, Divider, Typography, Input, Upload, Form, message } from 'antd';
import { Collapsible } from 'core/Collapsible';
import dayjs from 'dayjs';
const { Title, Text } = Typography;
export const RegistryAdvisor = ({ userData, weddinglist }) => {
    const [isOpen, setIsOpen] = useState(false);
    const [note, setNote] = useState(weddinglist?.description ||
        "Your presence is enough of a present to us! But for those of you who are stubborn, we've put together a wish-list to help you out.");
    const [isEditingNote, setIsEditingNote] = useState(false);
    const [imageUrl, setImageUrl] = useState(weddinglist?.imageUrl || '');
    const [form] = Form.useForm();
    const formattedWeddingDate = weddinglist?.weddingDate ? dayjs(weddinglist.weddingDate).format('MMM DD, YYYY') : '';
    return (_jsxs(_Fragment, { children: [_jsxs(Col, { span: 24, className: "mb-4", children: [_jsxs("div", { className: "text-center", children: [_jsx(Title, { className: "chamberi-heading", level: 1, children: weddinglist?.coupleName || `${userData.firstName} & ${userData.spouseFirstName}` }), _jsx(Button, { type: "link", icon: _jsx(DownOutlined, {}), className: "text-gray-500", onClick: () => setIsOpen(!isOpen), children: "Editar Foto y Nota" })] }), _jsx(Collapsible, { isOpen: isOpen, children: _jsx(Card, { className: "mt-4 mb-4", children: _jsx(Form, { form: form, layout: "vertical", initialValues: { note, imageUrl }, children: _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [_jsx("div", { children: _jsx(Form.Item, { name: "imageUrl", children: _jsxs("div", { className: "flex flex-col items-center", children: [_jsx("div", { className: "relative w-full max-w-md h-64 bg-gray-100 rounded-md mb-4 overflow-hidden", children: imageUrl ? (_jsx("img", { src: imageUrl, alt: "Couple", className: "w-full h-full object-cover" })) : (_jsx("div", { className: "flex items-center justify-center h-full w-full", children: _jsx(CameraOutlined, { style: { fontSize: '48px', color: '#d9d9d9' } }) })) }), _jsx(Upload, { name: "photo", showUploadList: false, beforeUpload: (file) => {
                                                                // Here you would normally upload to your server
                                                                // For now, we'll just create a local URL for preview
                                                                const reader = new FileReader();
                                                                reader.onload = (e) => {
                                                                    if (e.target?.result) {
                                                                        setImageUrl(e.target.result);
                                                                        form.setFieldsValue({ imageUrl: e.target.result });
                                                                    }
                                                                };
                                                                reader.readAsDataURL(file);
                                                                // Prevent default upload behavior
                                                                return false;
                                                            }, children: _jsx(Button, { icon: _jsx(UploadOutlined, {}), children: "Subir Foto" }) })] }) }) }), _jsx("div", { className: "flex items-center justify-center", children: isEditingNote ? (_jsxs("div", { className: "flex flex-col w-full", children: [_jsx(Form.Item, { name: "note", children: _jsx(Input.TextArea, { rows: 6, value: note, onChange: (e) => setNote(e.target.value), placeholder: "Write a note to your guests..." }) }), _jsx("div", { className: "flex justify-end", children: _jsx(Button, { type: "primary", onClick: () => {
                                                                // Here you would normally save to your backend
                                                                message.success('Photo and note updated successfully!');
                                                                setIsEditingNote(false);
                                                            }, children: "Save Changes" }) })] })) : (_jsxs("div", { className: "flex flex-col", children: [_jsx(Title, { level: 4, children: formattedWeddingDate }), _jsx(Text, { children: note }), _jsx("div", { className: "flex justify-start mt-6", children: _jsx(Button, { className: "", type: "primary", icon: _jsx(EditOutlined, {}), onClick: () => setIsEditingNote(true), children: "Editar" }) })] })) })] }) }) }) })] }), _jsx(Col, { span: 24, children: _jsxs(Card, { className: "shadow-md hover:shadow-lg transition-shadow", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx(Title, { level: 5, className: "mb-0", children: "Asesor de Registro" }), _jsxs("div", { className: "flex items-center", children: [_jsx(CalendarOutlined, { className: "mr-2 text-orange-400" }), _jsxs("span", { className: "mr-1", children: [weddinglist?.weddingDate
                                                    ? Math.ceil((new Date(weddinglist.weddingDate).getTime() - new Date().getTime()) / (1000 * 3600 * 24))
                                                    : 0, ' ', "d\u00EDas restantes"] }), _jsx(Divider, { type: "vertical" }), _jsx(UserOutlined, { className: "mr-1" }), _jsxs("span", { children: [weddinglist?.invitationCount || 0, " Invitados"] }), _jsx(EditOutlined, { className: "ml-2 text-gray-400" })] })] }), _jsxs("div", { className: "grid grid-cols-4 gap-4 mt-4", children: [_jsxs("div", { className: "text-center", children: [_jsxs("div", { className: "flex justify-center", children: [_jsx("div", { className: "text-3xl font-bold text-blue-500", children: weddinglist?.gifts?.filter((gift) => !gift.isPurchased).length || 0 }), _jsx(GiftOutlined, { className: "ml-2 text-gray-400 text-xl" })] }), _jsx("div", { className: "text-xs text-gray-500", children: "Regalos Disponibles" })] }), _jsxs("div", { className: "text-center", children: [_jsxs("div", { className: "flex justify-center", children: [_jsx("div", { className: "text-3xl font-bold text-blue-500", children: weddinglist?.gifts?.filter((gift) => gift.isPurchased).length || 0 }), _jsx(ShoppingOutlined, { className: "ml-2 text-gray-400 text-xl" })] }), _jsx("div", { className: "text-xs text-gray-500", children: "Reservados y Comprados" })] }), _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "flex justify-center items-center", children: _jsx("div", { className: "rounded-full border-2 border-gray-200 w-12 h-12 flex items-center justify-center", children: _jsx("span", { className: "text-lg font-bold text-blue-500", children: weddinglist?.gifts?.length || 0 }) }) }), _jsx("div", { className: "text-xs text-gray-500 mt-1", children: "Regalos Necesarios" })] }), _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "flex justify-center items-center", children: _jsx("div", { className: "rounded-full border-2 border-gray-200 w-12 h-12 flex items-center justify-center", children: _jsx("span", { className: "text-lg font-bold text-blue-500", children: "0" }) }) }), _jsx("div", { className: "text-xs text-gray-500 mt-1", children: "Fondo en Efectivo Necesario" })] })] }), _jsx("div", { className: "mt-6", children: _jsxs("div", { className: "flex justify-between items-center", children: [_jsxs("div", { children: [_jsx(Text, { type: "secondary", children: "40% de los invitados eligen un regalo seg\u00FAn el precio que quieren gastar." }), _jsx("div", { className: "text-xs text-purple-500", children: "La herramienta de Balance de Precios de MesaLista asegura que tengas suficientes regalos en cada rango de precio." })] }), _jsx("div", { className: "text-gray-400 text-sm", children: "Siguiente Consejo" })] }) }), _jsx(Divider, {}), _jsx("div", { children: _jsxs("div", { className: "grid grid-cols-5 gap-4", children: [_jsx("div", { className: "flex justify-center items-center", children: _jsx("p", { className: "mb-4", children: "Rangos de precios" }) }), _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "flex justify-center items-center", children: _jsx("div", { className: "rounded-full bg-gray-100 w-10 h-10 flex items-center justify-center", children: _jsx("span", { className: "font-bold", children: weddinglist?.gifts?.filter((gift) => gift.price < 50).length || 0 }) }) }), _jsx("div", { className: "text-xs mt-1", children: "Menos de $50" }), _jsx(Button, { size: "small", className: "mt-1", children: "Agregar" })] }), _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "flex justify-center items-center", children: _jsx("div", { className: "rounded-full bg-gray-100 w-10 h-10 flex items-center justify-center", children: _jsx("span", { className: "font-bold", children: weddinglist?.gifts?.filter((gift) => gift.price >= 50 && gift.price <= 100).length || 0 }) }) }), _jsx("div", { className: "text-xs mt-1", children: "$50 - $100" }), _jsx(Button, { size: "small", className: "mt-1", children: "Agregar" })] }), _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "flex justify-center items-center", children: _jsx("div", { className: "rounded-full bg-gray-100 w-10 h-10 flex items-center justify-center", children: _jsx("span", { className: "font-bold", children: weddinglist?.gifts?.filter((gift) => gift.price > 100 && gift.price <= 150).length || 0 }) }) }), _jsx("div", { className: "text-xs mt-1", children: "$100 - $150" }), _jsx(Button, { size: "small", className: "mt-1", children: "Agregar" })] }), _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "flex justify-center items-center", children: _jsx("div", { className: "rounded-full bg-gray-100 w-10 h-10 flex items-center justify-center", children: _jsx("span", { className: "font-bold", children: weddinglist?.gifts?.filter((gift) => gift.price > 150).length || 0 }) }) }), _jsx("div", { className: "text-xs mt-1", children: "M\u00E1s de $150" }), _jsx(Button, { size: "small", className: "mt-1", children: "Agregar" })] })] }) })] }) })] }));
};
